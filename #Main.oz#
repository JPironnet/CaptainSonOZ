%Main.Oz
functor
import
    GUI
    Input
    PlayerManager
define
    GUI_Port
    RecordPlayers 

    GameState %Etat de la partie TODO

    fun {GeneratePlayers}
        fun {GP Players Colors Number}
            if Number > Input.nbPlayer then nil
            else 
                case Players#Colors of (H|T)#(X|Xr) then
                    if (Input.isTurnByTurn) then
                        player(port:{PlayerManager.playerGenerator H X Number} turnToWait:0 alive:true)|{GP T Xr Number+1} %pas sur de ces lignes c'est du copier/coller
        
                    else 
                        player(port:{PlayerManager.playerGenerator H X Number})|{GP T Xr Number+1}
                    end
                end
            end
        end
    in
        {GP Input.players Input.colors 1}
    end

    fun {LaunchTurnByTurn Players GUI}
        %TODO
    end

    fun {LaunchSimultaneous Players GUI}
        %TODO
    end

in
    %Lancement du GUI
    GUI_Port = {GUI.portWindow}
    {Send GUI_Port buildWindow}

    %Creation des joueurs
    RecordPlayers = {GeneratePlayers}
    
    %Lancement de la partie 
    if(Input.isTurnByTurn) then
        {LaunchTurnByTurn RecordPlayers GUI_Port}
    else 
        {LaunchSimultaneous RecordPlayers GUI_Port}
    end
end
